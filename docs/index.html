<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="description" content="Presentation de Symfony">
<meta name="author" content="Section BTS SIO SLAM (LDV Melun) O. Capuozzo, G. Chamillard">
<title>Symfony Introduction</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Symfony Introduction</h1>
<div class="details">
<span id="author" class="author">Section BTS SIO SLAM (LDV Melun) O. Capuozzo, G. Chamillard</span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2018-07-30</span>
<br><span id="revremark">Version asciidoc</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table des matieres</div>
<ul class="sectlevel1">
<li><a href="#présentation">Présentation</a></li>
<li><a href="#modèle-d-architecture-applicative">Modèle d&#8217;architecture applicative</a>
<ul class="sectlevel2">
<li><a href="#prérequis">Prérequis</a></li>
<li><a href="#création-d-une-application-symfony-et-vérification-des-pré-requis">Création d&#8217;une application symfony et vérification des pré-requis</a></li>
<li><a href="#démarrage-du-serveur-et-de-l-application">Démarrage du serveur et de l&#8217;application</a></li>
<li><a href="#sécurité">Sécurité</a></li>
<li><a href="#résumé">Résumé</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="présentation"><a class="anchor" href="#présentation"></a>Présentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="images/logo-symfony.svg" alt="logo symfony" title="Symfony"></span></p>
</div>
<div class="paragraph">
<p>Symfony est une solution créée par la société <a href="https://sensiolabs.com">Sensiolabs</a> qui en assure l&#8217;évolution,
assitée par de  <a href="https://symfony.com/contributors">nombreux contributeurs</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Symfony est un ensemble de Composants PHP, un framework pour les Applications Web, une Philosophie, et une Communauté — tous travaillant ensemble, en harmonie.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Symfony<br>
<cite>Qu'est-ce que Symfony ? par Sensiolabs - a french company</cite>
</div>
</div>
<div class="paragraph">
<p>Cette introduction se base sur les ressources documentaires de Symfony (version 4), afin d&#8217;en faciliter le premier accès à des étudiants
développeurs ayant eu un premier contact avec le développement web.</p>
</div>
<div class="paragraph">
<p>Pour réaliser les travaux pratiques, vous aurez besoin d&#8217;aller plus en profondeur sur la connaissance des composants.
La documentation Symfony est accessible ici : <a href="https://symfony.com/doc/current/index.html" class="bare">https://symfony.com/doc/current/index.html</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modèle-d-architecture-applicative"><a class="anchor" href="#modèle-d-architecture-applicative"></a>Modèle d&#8217;architecture applicative</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le modèle traditionnel d&#8217;architecture des applications web est de type 3 tiers (clients, serveur(s), SBBD(s))</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-bdefc054a3e4aafd0670be26eb258583.png" alt="Interaction type entre tiers d&#8217;une application web" width="393" height="283">
</div>
<div class="title">Interaction type entre tiers d&#8217;une application web</div>
</div>
<div class="paragraph">
<p>Les applications symfony se situent sur le tiers du milieu "server et applications" (derrière un serveur HTTP).</p>
</div>
<div class="paragraph">
<p>En environnement de développement, les développeurs PHP disposent du <code>PHP&#8217;s internal web server</code>, un serveur http intégré au langage lui-même,
ce qui assure une certaine cohérence quant à la version de PHP utilisée pour les tests en phase de développement.</p>
</div>
<div class="paragraph">
<p>En environnement de production, l&#8217;application sera placée derrière un server Web de production, disposant d&#8217;une version de PHP conforme aux exigences du framework.
Les serveurs HTTP de production les plus courants sont <code>Apache</code> et <code>Nginx</code>.
Dans ce cas, reférez-vous aux consignes de configurations disponibles sur le site de symfony : <a href="https://symfony.com/doc/current/setup/web_server_configuration.html">web server configurations</a>.</p>
</div>
<div class="sect2">
<h3 id="prérequis"><a class="anchor" href="#prérequis"></a>Prérequis</h3>
<div class="sect3">
<h4 id="pour-le-développeur"><a class="anchor" href="#pour-le-développeur"></a>Pour le développeur</h4>
<div class="ulist">
<ul>
<li>
<p>Avoir une première expérience en programmation orientée objet (POO)</p>
</li>
<li>
<p>Connaître les principes de fonctionnement d&#8217;une interaction HTTP (protocole sans état, transfert de valeurs typées)
et les problématiques et solutions autour de la gestion du suivi de sessions HTTP</p>
</li>
<li>
<p>Maîtriser les concepts clés de l&#8217;interaction applicative avec un SGBD( R ) - (SQL)</p>
</li>
<li>
<p>Avoir des bases de HTML/CSS et JS.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="pour-le-système"><a class="anchor" href="#pour-le-système"></a>Pour le système</h4>
<div class="paragraph">
<p>Les prérequis système dépendent de la version de symfony que vous comptez utliser.
On vérifiera en particulier :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La version minimale attendue de PHP (dépend de la version de Symfony) actuellement &gt;= 7.1.3 )</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="title">Connaître la version de php</div>
<div class="content">
<pre>$ php -v
PHP 7.2.7</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>La présence de <code>composer</code> (suive ce lien <a href="https://getcomposer.org/"><code>Composer</code></a>) qui est un outil de gestion des dépendances pour des projets PHP.</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="title">Vérifier la version de composer</div>
<div class="content">
<pre>$ composer -V
Composer version 1.7.2 2018-08-16 16:57:12</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="création-d-une-application-symfony-et-vérification-des-pré-requis"><a class="anchor" href="#création-d-une-application-symfony-et-vérification-des-pré-requis"></a>Création d&#8217;une application symfony et vérification des pré-requis</h3>
<div class="paragraph">
<p>Ce sont des opérations qui s&#8217;effectuent en <strong>ligne de commande</strong>.</p>
</div>
<div class="paragraph">
<p>Pour commencer, placez-vous dans un dossier racine, qui héberge(ra) vos différents projets web, puis,
à partir de ce dossier, éxécuter la commande suivante :</p>
</div>
<div class="literalblock">
<div class="title">Création d&#8217;un squelette d&#8217;application</div>
<div class="content">
<pre>composer create-project symfony/website-skeleton my-project</pre>
</div>
</div>
<div class="paragraph">
<p>Explications :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>composer <i class="conum" data-value="1"></i><b>(1)</b>
    create-project symfony/website-skeleton <i class="conum" data-value="2"></i><b>(2)</b>
         my-project <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>appel de la commande <code>composer</code> ou <code>composer.phar</code> selon le cas</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>premier et deuxième arguments pour créer un projet selon un modèle</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>le troisième est le nom du projet, et donc du <strong>sous-dossier</strong> qui sera <strong>créé</strong>
à partir de la racine courante (il est donc important de se placer dans un dossier de travail avant de lancer une telle commande)</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="démarrage-du-serveur-et-de-l-application"><a class="anchor" href="#démarrage-du-serveur-et-de-l-application"></a>Démarrage du serveur et de l&#8217;application</h3>
<div class="paragraph">
<p>Depuis la version 5.4 de PHP, un serveur web est intégré à l&#8217;API.
Pour simplifier son usage, un composant symfony (un bundle) est disponible :</p>
</div>
<div class="literalblock">
<div class="title">Activation du mode dev avec le serveur HTTP intégré</div>
<div class="content">
<pre> $ cd your-project
 $ composer require symfony/web-server-bundle --dev</pre>
</div>
</div>
<div class="paragraph">
<p>Symfony fonctionne par composants, et il y en a un qui vérifie les prérequis, <code>Symfony Requirements Checker tool</code></p>
</div>
<div class="literalblock">
<div class="title">Installation du composant de vérification de la configuration système</div>
<div class="content">
<pre>$ cd your-project/
$ composer require requirements-checker</pre>
</div>
</div>
<div class="literalblock">
<div class="title">Demarrage du serveur</div>
<div class="content">
<pre>$ cd your-project
$ php bin/console server:start</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Par défaut, le serveur interne écoute sur le port 8000.
S&#8217;il est déjà pris sur machine, vous pouvez en indiqué un autre, voir ici  <a href="https://symfony.com/doc/current/setup/built_in_web_server.html" class="bare">https://symfony.com/doc/current/setup/built_in_web_server.html</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une fois ce composant installé, votre application pourra être sollicitée
par la route <a href="http://localhost:8000/check.php" class="bare">http://localhost:8000/check.php</a>, dont voici le résultat attendu :</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/symfony-check.png" alt="check-configuration"></span></p>
</div>
<div class="paragraph">
<p>Après avoir réglé la situation, pour des questions de sécurité, ne pas oublier de supprimer cette fonctionnalité :</p>
</div>
<div class="literalblock">
<div class="title">Désinstallation du composant de vérification de la configuration système</div>
<div class="content">
<pre> cd your-project/
 composer remove requirements-checker</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Vérifier les prerequis système est une des premières actions à réaliser lors de la phase de déploiement sur un serveur de production !
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="sécurité"><a class="anchor" href="#sécurité"></a>Sécurité</h3>
<div class="paragraph">
<p>Symfony fournit un utilitaire appelé <strong>Security Checker</strong> qui vérifie si les dépendances de votre projet contiennent des failles de sécurité connues.</p>
</div>
<div class="paragraph">
<p>Une fois installé, cet utilitaire s&#8217;exécutera automatiquement chaque fois que vous installez ou mettez à jour une dépendance de l&#8217;application.
Si une dépendance contient une vulnérabilité, en mode dev, un message clair vous sera présenté.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Appliquer le composant <code>security checker</code> à votre projet. La procédure est décrite ici : <a href="https://symfony.com/doc/current/setup.html" class="bare">https://symfony.com/doc/current/setup.html</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Le développeur travaille et teste en mode <code>dev</code> (développement). Avant de passer en mode <code>prod</code> (production, c-a-d déploiement), des tests sont réalisés en mode <code>pré-prod</code> (pré-production), afin de vérifier le bon fonctionnement dans le cadre de l&#8217;architecture cible.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="résumé"><a class="anchor" href="#résumé"></a>Résumé</h3>
<div class="paragraph">
<p>À ce stade, vous avez, sur votre machine de dev, installé, configuré et testé un environnement de développement web avec Symfony.
Vous avez installé Symfony en mode "boîte noire".</p>
</div>
<div class="paragraph">
<p>L&#8217;étape suivante vous amène progressivement à comprendre l&#8217;intérieur de cette boîte, à savoir comment l&#8217;utiliser !</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2018-08-30 15:46:31 CEST
</div>
</div>
</body>
</html>