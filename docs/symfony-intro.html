<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="description" content="Presentation de Symfony">
<meta name="author" content="Olivier Capuozzo, Gilles Chamillard">
<title>Symfony Introduction</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Symfony Introduction</h1>
<div class="details">
<span id="author" class="author">Olivier Capuozzo</span><br>
<span id="author2" class="author">Gilles Chamillard</span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2018-01-06</span>
<br><span id="revremark">Version asciidoc</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table des matieres</div>
<ul class="sectlevel1">
<li><a href="#présentation">Présentation</a></li>
<li><a href="#modèle-d-architecture-applicative">Modèle d&#8217;architecture applicative</a></li>
<li><a href="#prérequis">Prérequis</a>
<ul class="sectlevel2">
<li><a href="#concernant-le-développeur">Concernant le développeur</a></li>
<li><a href="#concernant-le-système">Concernant le système</a></li>
</ul>
</li>
<li><a href="#création-d-une-application-symfony-et-vérification-des-pré-requis">Création d&#8217;une application symfony et vérification des pré-requis</a></li>
<li><a href="#démarrage-du-serveur-et-de-l-application">Démarrage du serveur et de l&#8217;application</a></li>
<li><a href="#première-page-notion-de-vue-contrôleur">Première page : notion de Vue/Contrôleur</a>
<ul class="sectlevel2">
<li><a href="#rendu-par-une-logique-de-vue-archtecture-mvc">Rendu par une logique de vue (archtecture MVC)</a></li>
<li><a href="#template-de-base-de-l-application">Template de base de l&#8217;application</a></li>
</ul>
</li>
<li><a href="#gestion-des-données-d-entrée">Gestion des données d&#8217;entrée</a>
<ul class="sectlevel2">
<li><a href="#pas-de-variables-super-globales-comme-get-session">Pas de variables super-globales comme GET[], SESSION[], &#8230;&#8203;</a></li>
<li><a href="#données-implicites">Données implicites</a></li>
<li><a href="#données-explicites">Données explicites</a></li>
</ul>
</li>
<li><a href="#travaux-pratiques-1">Travaux Pratiques - 1 -</a>
<ul class="sectlevel2">
<li><a href="#préambule">Préambule</a></li>
<li><a href="#objectifs">Objectifs</a></li>
<li><a href="#ressources-à-prendre-en-compte">Ressources à prendre en compte</a></li>
<li><a href="#annexe-tp-1-code-legacy-prototype">Annexe TP-1 - code legacy (prototype)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="présentation"><a class="anchor" href="#présentation"></a>Présentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="images/logo-symfony.svg" alt="logo symfony" title="Symfony"></span></p>
</div>
<div class="paragraph">
<p>Symfony est une solution créée par la société <a href="https://sensiolabs.com">Sensiolabs</a> qui en assure l&#8217;évolution,
assitée par de  <a href="https://symfony.com/contributors">nombreux contributeurs</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Symfony est un ensemble de Composants PHP, un framework pour les Applications Web, une Philosophie, et une Communauté — tous travaillant ensemble, en harmonie.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Symfony<br>
<cite>Qu'est-ce que Symfony ? par Sensiolabs - a french company</cite>
</div>
</div>
<div class="paragraph">
<p>Cette introduction se base sur les ressources documentaires de Symfony (version 4), afin d&#8217;en faciliter le premier accès à des étudiants
développeurs ayant eu un premier contact avec le développement web.</p>
</div>
<div class="paragraph">
<p>Pour réaliser les travaux pratiques, vous aurez besoin d&#8217;aller plus en profondeur sur la connaissance des composants.
La documentation Symfony est accessible ici : <a href="https://symfony.com/doc/current/index.html" class="bare">https://symfony.com/doc/current/index.html</a></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/request-flow.png" alt="symfony-flow-schema"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modèle-d-architecture-applicative"><a class="anchor" href="#modèle-d-architecture-applicative"></a>Modèle d&#8217;architecture applicative</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le modèle d&#8217;architecture des applications web est de type 3 tiers (clients, serveur, SBBD)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-d74203d94f4e533980e902e2ca12dd73.png" alt="Interaction type entre tiers d'une application web" width="393" height="283">
</div>
<div class="title">Figure 1. Interaction type entre tiers d&#8217;une application web</div>
</div>
<div class="paragraph">
<p>Les applications symfony se situent sur le tiers "server et applications" (derrière un serveur HTTP).</p>
</div>
<div class="paragraph">
<p>En environnement de développement, les développeurs PHP disposent du <code>PHP&#8217;s internal web server</code>, un serveur http intégré au langage lui-même,
ce qui assure un certain contrôle quant à la version de PHP utilisée lors de la phase de développement.</p>
</div>
<div class="paragraph">
<p>En environnement de production, l&#8217;application sera placée derrière un server Web de production, disposant d&#8217;une version de PHP conforme aux exigences du framework.
Les serveurs HTTP de production les plus courants sont <code>Apache</code> et <code>Nginx</code>.
Dans ce cas, reférez-vous aux consignes de configurations disponibles sur le site de symfony : <a href="https://symfony.com/doc/current/setup/web_server_configuration.html">web server configurations</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prérequis"><a class="anchor" href="#prérequis"></a>Prérequis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="concernant-le-développeur"><a class="anchor" href="#concernant-le-développeur"></a>Concernant le développeur</h3>
<div class="ulist">
<ul>
<li>
<p>Avoir une première expérience avec la programmation orientée objet (POO)</p>
</li>
<li>
<p>Comprendre les principes de fonctionnement d&#8217;une interaction HTTP (protocole sans état, passage de valeurs)
et les problématiques et solutions autour de la gestion du suivi de sessions HTTP</p>
</li>
<li>
<p>Une certaine connaissance en interaction applicative avec un SGBD( R ) - (SQL)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="concernant-le-système"><a class="anchor" href="#concernant-le-système"></a>Concernant le système</h3>
<div class="paragraph">
<p>Les prérequis système dépendent de la version de symfony que vous comptez utliser.
On se réfèrera à <a href="https://symfony.com/doc/current/reference/requirements.html">Symfony Requirements</a>, en particulier :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La version minimale attendue de PHP (dépend de la version de Symfony)</p>
</li>
<li>
<p><a href="https://getcomposer.org/"><code>Composer</code></a> (outils de gestion des dépendances pour des projets PHP, vérifier sa présence sur votre système)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="création-d-une-application-symfony-et-vérification-des-pré-requis"><a class="anchor" href="#création-d-une-application-symfony-et-vérification-des-pré-requis"></a>Création d&#8217;une application symfony et vérification des pré-requis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ce sont des opérations qui s&#8217;effectuent en ligne de commande :</p>
</div>
<div class="literalblock">
<div class="title">Création d&#8217;un squelette d&#8217;application</div>
<div class="content">
<pre>composer create-project symfony/website-skeleton my-project</pre>
</div>
</div>
<div class="paragraph">
<p>Explications :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>composer <i class="conum" data-value="1"></i><b>(1)</b>
    create-project symfony/website-skeleton <i class="conum" data-value="2"></i><b>(2)</b>
         my-project <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>appel de la commande <code>composer</code> ou <code>composer.phar</code> selon le cas</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>premier et deuxième arguments pour créer un projet selon un modèle</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>le troisième est le nom du projet, et donc du <strong>sous-dossier</strong> qui sera <strong>créé</strong>
à partir de la racine courante (il est donc important de se placer dans un dossier de travail avant de lancer une telle commande)</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="démarrage-du-serveur-et-de-l-application"><a class="anchor" href="#démarrage-du-serveur-et-de-l-application"></a>Démarrage du serveur et de l&#8217;application</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="title">Activation du mode dev</div>
<div class="content">
<pre> $ cd your-project
 $ composer require server --dev</pre>
</div>
</div>
<div class="paragraph">
<p>Symfony fonctionne par composants, et il y en a un qui vérifie les prérequis, <code>Symfony Requirements Checker tool</code></p>
</div>
<div class="literalblock">
<div class="title">Installation du composant de vérification de la configuration système</div>
<div class="content">
<pre>$ cd your-project/
$ composer require requirements-checker</pre>
</div>
</div>
<div class="literalblock">
<div class="title">Demarrage du serveur</div>
<div class="content">
<pre>$ cd your-project
$ php bin/console server:run</pre>
</div>
</div>
<div class="paragraph">
<p>Une fois ce composant installé, votre application pourra être sollicitée
par la route <a href="http://localhost:8000/public/check.php" class="bare">http://localhost:8000/public/check.php</a>, dont voici le résultat attendu :</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/symfony-check.png" alt="check-configuration"></span></p>
</div>
<div class="paragraph">
<p>Après avoir réglé la situation, pour des questions de sécurité, ne pas oublier de supprimer cette fonctionnalité :</p>
</div>
<div class="literalblock">
<div class="title">Désinstallation du composant de vérification de la configuration système</div>
<div class="content">
<pre> cd your-project/
 composer remove requirements-checker</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Vérifier les prerequis système est une des premières actions à réaliser lors de la phase de déploiement sur un serveur de production !
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="première-page-notion-de-vue-contrôleur"><a class="anchor" href="#première-page-notion-de-vue-contrôleur"></a>Première page : notion de Vue/Contrôleur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(d&#8217;après : <a href="https://symfony.com/doc/current/page_creation.html" class="bare">https://symfony.com/doc/current/page_creation.html</a>)</p>
</div>
<div class="paragraph">
<p>Pour une application web, créer une page c&#8217;est permettre à un certain public
d&#8217;accéder à une <strong>ressource</strong> (ou service) <strong>web</strong>. Pour cela, plusieurs activités sont concernées:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>permettre à l&#8217;application web de répondre à une requête HTTP en définissant  une route (portion terminale d&#8217;un URL) pour la ressource en question</p>
</li>
<li>
<p>définir via quelle méthode d&#8217;accès HTTP cette ressource sera accessible (GET, POST, PUT, HEAD, &#8230;&#8203;)</p>
</li>
<li>
<p>concevoir le <strong>contrôleur</strong> associé à la ressource : une méthode d&#8217;une classe <code>Controller</code></p>
</li>
<li>
<p>définir la structure de la resource dynamique soit dans le contrôleur, soit via un template de vue (<strong>twig</strong> par exemple)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si cette requête est de type <code>GET</code>, elle correspond à une demande de <em>resssource distante</em>.
Cela peut correspondre à une donnée statique (un fichier placé sur le serveur) ou dynamique (construite pour l&#8217;occasion).</p>
</div>
<div class="paragraph">
<p>Nous nous plaçons dans le cas où l&#8217;application répondra par du contenu dynamique <code>HTML</code>.</p>
</div>
<div class="paragraph">
<p>Une application web n&#8217;expose jamais directement ses templates de vue de ses ressources dynamiques (pas de lien direct vers un script de vue)</p>
</div>
<div class="paragraph">
<p>Dans le cadre de symfony, un contôleur central (<em>front controller</em>) réceptionne les requêtes HTTP
et les traduit en appel de <strong>méthodes</strong> d&#8217;instance d&#8217;une classe <strong>contrôleur</strong> (<em>controller</em>)</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/request-flow.png" alt="symfony-flow-schema"></span></p>
</div>
<div class="paragraph">
<p>Comme le montre ce schéma, le développeur doit mettre à disposition du framework des méthodes.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Attention, le schéma ne montre que les méthodes (<code>blogAction</code>, <code>contactAction</code> et <code>homepageAction</code>),
         mais ne donne pas le nom de la (ou des) classes où elles sont définies.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La liaison méthode &#8592;&#8594; URL peut se réaliser soit par un <em>fichier de configuration</em>, soit via des <strong><em>annotations</em></strong> dans le code.
Nous choisirons cette dernière option, bien pratique, mais avant de concevoir une telle classe, vous devrez ajouter des composants à votre
application. Le plus souple pour cela est de demander à <code>composer</code> de le faire pour vous :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cd your-project/
$ composer require annotations</pre>
</div>
</div>
<div class="paragraph">
<p>Il serait également préférable d&#8217;installer des plugins à votre IDE : avec PhpStorm,
aller <code>File&#8594;Settings</code> puis chercher <code>plugin symfony</code> et les installer.</p>
</div>
<div class="paragraph">
<p>Voici un exemple de classe contrôleur, extrait de la documentation : <a href="https://symfony.com/doc/current/page_creation.html">Symfony - page_creation.html</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"><span class="inline-delimiter">&lt;?php</span>

<span class="comment">// src/Controller/LuckyController.php  </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="keyword">namespace</span> <span class="constant">App</span>\<span class="constant">Controller</span>;  <i class="conum" data-value="2"></i><b>(2)</b>

<span class="keyword">use</span> <span class="constant">Symfony</span>\<span class="constant">Component</span>\<span class="constant">HttpFoundation</span>\<span class="constant">Response</span>;  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="keyword">use</span> <span class="constant">Symfony</span>\<span class="constant">Component</span>\<span class="constant">Routing</span>\<span class="constant">Annotation</span>\<span class="constant">Route</span>;

<span class="keyword">class</span> <span class="class">LuckyController</span> <i class="conum" data-value="3"></i><b>(3)</b>
{
  <span class="comment">/**
  * @Route(&quot;/lucky/number&quot;) <i class="conum" data-value="4"></i><b>(4)</b>
  */</span>
  <span class="keyword">public</span> <span class="keyword">function</span> <span class="function">number</span>() <i class="conum" data-value="5"></i><b>(5)</b>
  {
    <span class="local-variable">$number</span> = mt_rand(<span class="integer">0</span>, <span class="integer">100</span>);

    <span class="keyword">return</span> <span class="keyword">new</span> <span class="constant">Response</span>( <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="string"><span class="delimiter">'</span><span class="content">&lt;html&gt;&lt;body&gt;Lucky number: </span><span class="delimiter">'</span></span>.<span class="local-variable">$number</span>.<span class="string"><span class="delimiter">'</span><span class="content">&lt;/body&gt;&lt;/html&gt;</span><span class="delimiter">'</span></span>
    );
  }
} <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>un comment à destination du lecteur, afin d&#8217;identifier le chemin de sauvegarde</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>les librairies dont dépend le code ci-dessous (Classe et annotation)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>une classe normale PHP Objet</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>définition de la logique d&#8217;appel (extrait terminal URL de l&#8217;application)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>une méthode public; Elle sera automatiquement appelée via le <em>front controller</em>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>retourne un instance de <code>Response</code> (avec du contenu <em>HTML</em>)</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>le marqueur de fin de traitement PHP (<code>?&gt;</code>) est volontairement absent afin de conserver le sens <em>librairie</em> d&#8217;une classe Controller.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Voici un extrait des spécifications de la fonction <a href="http://php.net/manual/fr/function.mt-rand.php" class="bare">http://php.net/manual/fr/function.mt-rand.php</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"><span class="predefined-type">int</span> mt_rand ( <span class="predefined-type">int</span> <span class="local-variable">$min</span> , <span class="predefined-type">int</span> <span class="local-variable">$max</span> )

<span class="constant">Valeurs</span> de retour

<span class="constant">Un</span> entier aléatoire compris entre <span class="predefined">min</span> (ou <span class="integer">0</span>) et <span class="predefined">max</span> inclusif, ou <span class="predefined-constant">FALSE</span> si le paramètre <span class="predefined">max</span> est inférieur à <span class="predefined">min</span>.</code></pre>
</div>
</div>
<div class="literalblock">
<div class="title">Activation de la page (demande de la ressource "number")</div>
<div class="content">
<pre>http://localhost:8000/lucky/number</pre>
</div>
</div>
<div class="sect2">
<h3 id="rendu-par-une-logique-de-vue-archtecture-mvc"><a class="anchor" href="#rendu-par-une-logique-de-vue-archtecture-mvc"></a>Rendu par une logique de vue (archtecture MVC)</h3>
<div class="paragraph">
<p>Concevoir la logique de présentation (HTML and Co) dans un contrôleur n&#8217;est pas une bonne pratique.</p>
</div>
<div class="paragraph">
<p>Fort heureusement Symfony vient avec <a href="https://twig.symfony.com/"><strong>Twig</strong></a> : un langage
de vue puissant et plaisant à utiliser.</p>
</div>
<div class="paragraph">
<p>Twig est proposé en tant que composant, qu&#8217;il faut installer :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cd your-project/
$ composer require twig</pre>
</div>
</div>
<div class="paragraph">
<p>Il faut ensuite s&#8217;assurer <code>LuckyController</code> hérite de la classe de base des contrôleurs <code>Controller</code>:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. MVC : Les classes contrôleur héritent de Controller</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"><span class="comment">// src/Controller/LuckyController.php</span>

<span class="comment">// ...</span>
+ <span class="keyword">use</span> <span class="constant">Symfony</span>\<span class="constant">Bundle</span>\<span class="constant">FrameworkBundle</span>\<span class="constant">Controller</span>\<span class="constant">Controller</span>; <i class="conum" data-value="1"></i><b>(1)</b>

- <span class="keyword">class</span> <span class="class">LuckyController</span>
+ <span class="keyword">class</span> <span class="class">LuckyController</span> <span class="keyword">extends</span> <span class="constant">Controller</span> <i class="conum" data-value="2"></i><b>(2)</b>
{
    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>déclaration de la dépendance (un import)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>la classe LuckyController hérite de Controller</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Et faire en sorte que la méthode contrôleur <strong>délègue</strong> la vue à une page twig :</p>
</div>
<div class="listingblock">
<div class="title">Listing 2. MVC : Une classe contrôleur hérite de Controller</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"><span class="comment">// src/Controller/LuckyController.php</span>

<span class="comment">// ...</span>
<span class="keyword">class</span> <span class="class">LuckyController</span> <span class="keyword">extends</span> <span class="constant">Controller</span>
{
    <span class="comment">/**
     * @Route(&quot;/lucky/number&quot;)
     */</span>
    <span class="keyword">public</span> <span class="keyword">function</span> <span class="function">numberAction</span>()
    {
        <span class="local-variable">$number</span> = mt_rand(<span class="integer">0</span>, <span class="integer">100</span>);

        <span class="keyword">return</span> <span class="local-variable">$this</span>-&gt;render(<span class="string"><span class="delimiter">'</span><span class="content">lucky/number.html.twig</span><span class="delimiter">'</span></span>, <span class="predefined">array</span>( <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="string"><span class="delimiter">'</span><span class="content">number</span><span class="delimiter">'</span></span> =&gt; <span class="local-variable">$number</span>,
        ));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>appel à la méthode héritée (<em>render</em>) en lui passant le nom d&#8217;une vue, suivi d&#8217;un <strong>tableau associatif</strong>, appelé aussi <strong>dictionnaire</strong>, composé de <strong>couples (nom_variable&#8658;valeur)</strong>.
Dans notre cas, le tableau n&#8217;a qu&#8217;un seul élément ('number'&#8658; $number),
qui sera passé à la vue.
La vue aura accès à ces valeurs <strong>directement</strong> par le nom des clés définis dans ce dictionnaire.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les fichiers de vue seront cherchés par symfony, par défaut, dans le dossier <strong><em>templates</em></strong> à partir de la racine du projet (ce dossier est automatiquement crée lors de l&#8217;installation de twig).</p>
</div>
</div>
<div class="sect2">
<h3 id="template-de-base-de-l-application"><a class="anchor" href="#template-de-base-de-l-application"></a>Template de base de l&#8217;application</h3>
<div class="paragraph">
<p>C&#8217;est un fichier qui détermnine la structure HTML/CSS générale de votre application.
La plupart du temps un tel template se base sur un modèle proposé par des frameworks CSS (<em>bootstrap</em>, <em>semantic-ui</em>, &#8230;&#8203;). Il est parfois acheté auprès de sociétés spécialisées.</p>
</div>
<div class="paragraph">
<p>Exemple de template simple, <em>from scratch</em>, créé par le composant <em>twig</em> lors de son intégration dans ce projet (symfony &gt;= 4)</p>
</div>
<div class="listingblock">
<div class="title">Listing 3. localisation : projet/templates/base.html.twig</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;title&gt;</span>{% block title %}Welcome!{% endblock %}<span class="tag">&lt;/title&gt;</span>
        {% block stylesheets %}{% endblock %}
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        {% block body %}{% endblock %} <i class="conum" data-value="1"></i><b>(1)</b>
        {% block javascripts %}{% endblock %}
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Définition d&#8217;un block nommé <code>body</code> (ne pas confondre avec <code>&lt;body&gt;</code>).
Les vues héritant pouvent alors redéfinir ces blocks.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce template de base définit 4 blocks : <code>title</code>, <code>stylesheets</code>, <code>body</code> et <code>javascripts</code>.</p>
</div>
<div class="paragraph">
<p>Pour répondre au besoin de notre méthode <em>numberAction</em> de <em>LuckyController</em>, nous
devons créer une nouvelle vue dans le dossier <em>templates/lucky</em>, nommée <code>number.html.twig</code> (<code>lucky</code> est un dossier qu&#8217;il faut créer) :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">{<span class="comment"># templates/lucky/number.html.twig #} </span><i class="conum" data-value="1"></i><b>(1)</b>
{% <span class="keyword">extends</span> <span class="string"><span class="delimiter">'</span><span class="content">base.html.twig</span><span class="delimiter">'</span></span> %} <i class="conum" data-value="2"></i><b>(2)</b>

{% block title %}<span class="constant">Devine</span>{% endblock %} <i class="conum" data-value="3"></i><b>(3)</b>

{% block body %} <i class="conum" data-value="4"></i><b>(4)</b>
&lt;h1&gt;<span class="constant">Your</span> lucky number is {{ number }}&lt;/h1&gt;
{% endblock %}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>un commentaire twig qui vous informe, vous lecteur, de la localisation de ce fichier</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>cette vue hérite d&#8217;un template qui définit les blocs <code>title</code> et <code>body</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>redéfinition du bloc <code>title</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>redéfinition du bloc <code>body</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Vous trouverez la syntaxe twig ici : <a href="https://twig.symfony.com/" class="bare">https://twig.symfony.com/</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gestion-des-données-d-entrée"><a class="anchor" href="#gestion-des-données-d-entrée"></a>Gestion des données d&#8217;entrée</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Conformément à l&#8217;architecture applicative, c&#8217;est une méthode dite <em>contrôleur</em> qui prend en charge l&#8217;exploitation des données transmises par le client (celui qui est à l&#8217;origine de la requête HTTP)</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Teminologie : les méthodes associées à des <em>Routes</em> dans une classe <em>Controller</em> sont appelées <strong><em>méthodes d&#8217;action</em></strong>. Par extension, on nomme parfois de telles méthodes des <strong><em>contrôleurs</em></strong>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="pas-de-variables-super-globales-comme-get-session"><a class="anchor" href="#pas-de-variables-super-globales-comme-get-session"></a>Pas de variables super-globales comme GET[], SESSION[], &#8230;&#8203;</h3>
<div class="paragraph">
<p>Pour accéder aux données transmises avec la requête HTTP,
le contrôleur passera par un objet de type <em>Request</em> (de <em>HttpFoundation</em>).</p>
</div>
<div class="paragraph">
<p>C&#8217;est par l&#8217;intermédiaire de cet objet, que nous pourrons accéder aux données
de la session utilisateur.</p>
</div>
<div class="paragraph">
<p>Utilisation d&#8217;un objet de la classe <code>Symfony\Component\HttpFoundation\Request</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"><span class="keyword">use</span> <span class="constant">Symfony</span>\<span class="constant">Component</span>\<span class="constant">HttpFoundation</span>\<span class="constant">Request</span>; <i class="conum" data-value="1"></i><b>(1)</b>

[...]

<span class="keyword">public</span> <span class="keyword">function</span> <span class="function">index</span>(<span class="constant">Request</span> <span class="local-variable">$request</span>) <i class="conum" data-value="2"></i><b>(2)</b>
{
  <span class="comment">// exploiter $request</span>
}

[...]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>un composant du micro-framework</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>en déclarant un paramètre de type Request, on demande à symfony de nous <strong>auto-injecter</strong> un argument de ce type, parfaitement bien initialisé.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="données-implicites"><a class="anchor" href="#données-implicites"></a>Données implicites</h3>
<div class="literalblock">
<div class="content">
<pre>TODO</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="données-explicites"><a class="anchor" href="#données-explicites"></a>Données explicites</h3>
<div class="paragraph">
<p>ce sont celles en provenance soit d&#8217;un <strong>formulaire (HTML)</strong> soit comme composantes <a href="https://en.wikipedia.org/wiki/Query_string">QueryString</a> de l'<strong>URL</strong>.</p>
</div>
<div class="sect3">
<h4 id="via-un-formulaire"><a class="anchor" href="#via-un-formulaire"></a>via un formulaire</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">    <span class="comment">// retrieves POST variables respectively</span>
    <span class="local-variable">$request</span>-&gt;request-&gt;get(<span class="string"><span class="delimiter">'</span><span class="content">idProuit</span><span class="delimiter">'</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="comment">// retrieves an instance of UploadedFile identified by foo</span>
    <span class="local-variable">$request</span>-&gt;files-&gt;get(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>C&#8217;est via l&#8217;attribut <code>request</code>, de l&#8217;objet référencé par <code>$request</code> (à ne pas confondre) que le contrôleur aura accès aux données passées par <code>POST</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="cas-des-arguments-passés-dans-l-url"><a class="anchor" href="#cas-des-arguments-passés-dans-l-url"></a>Cas des arguments passés dans l&#8217;url</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"> <span class="comment">// retrieves GET variables respectively</span>
    <span class="local-variable">$request</span>-&gt;query-&gt;get(<span class="string"><span class="delimiter">'</span><span class="content">x</span><span class="delimiter">'</span></span>, <span class="integer">66</span>);  <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>C&#8217;est via l&#8217;attribut <code>query</code>, de l&#8217;objet référencé par <code>$request</code>, que le contrôleur aura accès aux données passées par <code>GET</code>.
Par exemple, les données transmises en arguments de l&#8217;url (<code>?a=b&amp;x=42</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La méthode <code>get</code> prend en premier argument la <strong>clé</strong> (ici <code>a</code> ou <code>x</code>), le deuxième étant une <strong>valeur par défaut</strong>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="cas-de-valeurs-incluses-dans-l-url-même"><a class="anchor" href="#cas-de-valeurs-incluses-dans-l-url-même"></a>Cas de valeurs incluses dans l&#8217;url même</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"> <span class="comment">/**
     * Matches /blog/*
     *
     * @Route(&quot;/blog/{slug}&quot;, name=&quot;blog_show&quot;)  <i class="conum" data-value="1"></i><b>(1)</b>
     */</span>
    <span class="keyword">public</span> <span class="keyword">function</span> <span class="function">show</span>(<span class="local-variable">$slug</span>) { ... } <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La route contient une partie variable, représentée par un paramètre placé en <code>{  }</code> (ici <em>slug</em>). Exemples d&#8217;arguments : <code>/blog/usecase1</code> ou <code>/blog/usecase2</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Reprise de la partie variable de l&#8217;url comme <strong>paramètre</strong> de la méthode (attention, même nom que le paramètre de route)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il est dans ce cas très facile de récupérer la valeur en question, car elle est passée automatiquement à la méthode !</p>
</div>
<div class="paragraph">
<p>Plus d&#8217;infos sur l&#8217;exploitation des valeurs d&#8217;entrée :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://symfony.com/doc/current/routing.html" class="bare">https://symfony.com/doc/current/routing.html</a></p>
</li>
<li>
<p><a href="https://symfony.com/doc/current/controller.html" class="bare">https://symfony.com/doc/current/controller.html</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="travaux-pratiques-1"><a class="anchor" href="#travaux-pratiques-1"></a>Travaux Pratiques - 1 -</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="préambule"><a class="anchor" href="#préambule"></a>Préambule</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Après avoir installé et configuré votre IDE, atteindre la dernière étape de ce premier tutoriel, à savoir :</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/lucky-number-42.png" alt="lucky number in action" width="500"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="objectifs"><a class="anchor" href="#objectifs"></a>Objectifs</h3>
<div class="ulist">
<ul>
<li>
<p>Traduction d&#8217;un code PHP mélangant logique de traitement et logique de vue en une structure séparant Vues (Twig) et Contrôleurs (objets)</p>
</li>
<li>
<p>Progression du prototype en mode interatif et incrémental</p>
</li>
</ul>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Concevoir une application web répondant aux spécifications suivantes :</p>
</li>
</ol>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
L&#8217;utilisateur cherche à trouver un nombre retenu par l&#8217;application de façon « aléatoire », sur une plage d&#8217;amplitude allant de zéro à, disons, 50.
 Chaque nombre sera représenté par une cellule <code>td</code> d&#8217;un tableau <code>html</code>. Lorsque l&#8217;utilisateur soumet une proposition (clique sur une cellule/nombre), l&#8217;application répond « valeur trop petite », « valeur trop grande » ou « Trouvé ! ». Durant les tentatives, l&#8217;application montre les cellules déjà sélectionnées par l&#8217;utilisateur (prévoir une classe CSS dédiée). La partie s&#8217;arrête lorsque l&#8217;utilisateur a trouvé le bon nombre.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
L&#8217;application ne sauvegardera aucune donnée du jeu (historique utilisateur) sur le serveur (les « données de sessions » seront transmises au client – et donc portées par celui-ci – un exemple de code est donné en annexe).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Étapes à suivre :</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Traduire le code PHP de l&#8217;annexe en un prjet symfony (avec contrôleur index et vue twig)</p>
</li>
<li>
<p>Faire évoluer l&#8217;application afin qu&#8217;elle réponde aux attentes (exprimées ci-dessus).</p>
</li>
<li>
<p>Présentation des nombres dans une matrice 10 x 10</p>
</li>
<li>
<p>L&#8217;utilisateur pourra relancer autant de parties qu&#8217;il le souhaite. Comme il se doit, l&#8217;application sera capable de gérer plusieurs utilisateurs en même temps.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Lorsque que le nombre est trouvé, l&#8217;application affiche un des messages suivants :</p>
<div class="ulist">
<ul>
<li>
<p><strong>« Vous avez de la chance !»</strong> si le nombre d’essai du joueur est inférieur au nombre optimal (à déterminer après avoir étudié le principe de la recherche dichotomique - lien wikipédia ci-dessous).</p>
</li>
<li>
<p><strong>« Votre stratégie a été la bonne »</strong> si le nombre d’essai du joueur est égale au nombre optimal.</p>
</li>
<li>
<p><strong>« Vous avez débordé de n tentatives »</strong> où <em>n</em> est le nombre de tentatives au-delà du nombre optimal.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Pour déterminer le message à présenter, référez-vous aux caractéristiques d&#8217;efficacité de la <strong>recherche dichotomique</strong> : <a href="https://fr.wikipedia.org/wiki/Dichotomie" class="bare">https://fr.wikipedia.org/wiki/Dichotomie</a></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Optionnel, pour les plus avancés :</p>
<div class="ulist">
<ul>
<li>
<p>L&#8217;utilisateur peut étendre l&#8217;amplitude de la matrice.</p>
</li>
<li>
<p>Proposer une version qui n’expose pas la valeur à trouver au client (prévoir un  cryptage symétrique du nombre – l’expéditeur est le destinataire).</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ressources-à-prendre-en-compte"><a class="anchor" href="#ressources-à-prendre-en-compte"></a>Ressources à prendre en compte</h3>
<div class="ulist">
<ul>
<li>
<p>Génération pseudo-aléatoire d&#8217;un nombre : <a href="http://php.net/manual/fr/function.mt-rand.php" class="bare">http://php.net/manual/fr/function.mt-rand.php</a></p>
</li>
<li>
<p>Legacy code en annexe pour commencer.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="annexe-tp-1-code-legacy-prototype"><a class="anchor" href="#annexe-tp-1-code-legacy-prototype"></a>Annexe TP-1 - code legacy (prototype)</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php"><span class="inline-delimiter">&lt;?php</span>
<span class="comment">// exploitation des données reçues (ou attendues) – on attend un couple i=n</span>
<span class="keyword">if</span> (<span class="predefined">isset</span>(<span class="predefined">$_GET</span>[<span class="string"><span class="delimiter">'</span><span class="content">i</span><span class="delimiter">'</span></span>])) :
  <span class="local-variable">$iChoixJoueur</span> = (<span class="predefined-type">int</span>) <span class="predefined">$_GET</span>[<span class="string"><span class="delimiter">'</span><span class="content">i</span><span class="delimiter">'</span></span>];
  <span class="comment">// force l'interprétation de la valeur en un entier</span>
  <span class="keyword">else</span> :
    <span class="local-variable">$iChoixJoueur</span> = -<span class="integer">1</span>;
  <span class="keyword">endif</span>;
  <span class="comment">// ou (même traitement que ci-dessus)</span>
  <span class="comment">// $iChoixJoueur = isset($_GET['i']) ? (int) $_GET['i'] : -1; //opérateur ternaire</span>
  <span class="comment">// on récupère l'historique des tentatives (une chaîne de caractères en fait)</span>
  <span class="keyword">if</span> (<span class="predefined">empty</span>(<span class="predefined">$_GET</span>[<span class="string"><span class="delimiter">'</span><span class="content">histo</span><span class="delimiter">'</span></span>])) :
    <span class="local-variable">$histo</span> = <span class="string"><span class="delimiter">'</span><span class="content">----------w--------------</span><span class="delimiter">'</span></span>;
    <span class="comment">// TODO : placer le numéro gagnant (w)iner de façon aléatoire</span>
  <span class="keyword">else</span>:
    <span class="local-variable">$histo</span> = <span class="predefined">$_GET</span>[<span class="string"><span class="delimiter">'</span><span class="content">histo</span><span class="delimiter">'</span></span>];
  <span class="keyword">endif</span>;
  <span class="comment">// mise à jour de l'historique : prise en compte du choix utilisateur</span>
  <span class="keyword">if</span> (<span class="local-variable">$iChoixJoueur</span> &gt;= <span class="integer">0</span> &amp;&amp; <span class="local-variable">$iChoixJoueur</span> &lt; <span class="predefined">strlen</span>(<span class="local-variable">$histo</span>)) :
    <span class="local-variable">$histo</span>[<span class="local-variable">$iChoixJoueur</span>] = <span class="string"><span class="delimiter">'</span><span class="content">j</span><span class="delimiter">'</span></span>;
  <span class="keyword">endif</span>;
 <span class="inline-delimiter">?&gt;</span>
<span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fr</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">'</span><span class="content">utf-8</span><span class="delimiter">'</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;title&gt;</span>À la recherche du nombre<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;style</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/css</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="class">.normal</span> {
    <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="value">black</span>;
  }
  <span class="class">.dejajoue</span> {
    <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="value">black</span>;
    <span class="key">background-color</span>: <span class="value">lightgreen</span>;
  }</span>
  <span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;h2&gt;</span>à la recherche du nombre<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;table&gt;</span>
    <span class="tag">&lt;tbody&gt;</span>
      <span class="tag">&lt;tr&gt;</span>
        <span class="inline-delimiter">&lt;?php</span>
          <span class="comment">// mode debug : var_dump($histo);</span>
          <span class="comment">// TODO : il faudrait mieux appliquer la classe &quot;dejajoue&quot;</span>
          <span class="comment">//        à toutes les cellules déjà jouées</span>
          <span class="keyword">for</span> (<span class="local-variable">$i</span>=<span class="integer">0</span>; <span class="local-variable">$i</span> &lt; <span class="predefined">strlen</span>(<span class="local-variable">$histo</span>); <span class="local-variable">$i</span>++) : <span class="comment">// strlen donne le nb de caractères</span>
            <span class="keyword">if</span> (<span class="local-variable">$i</span> == <span class="local-variable">$iChoixJoueur</span>) : <span class="inline-delimiter">?&gt;</span>
              <span class="tag">&lt;td</span> <span class="attribute-name">class</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">dejajoue</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="inline-delimiter">&lt;?php</span> <span class="keyword">else</span> : <span class="inline-delimiter">?&gt;</span>
              <span class="tag">&lt;td</span> <span class="attribute-name">class</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">normal</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="inline-delimiter">&lt;?php</span> <span class="keyword">endif</span>; <span class="inline-delimiter">?&gt;</span>
              <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">?i=</span></span><span class="inline-delimiter">&lt;?php</span> <span class="predefined">echo</span> <span class="local-variable">$i</span> <span class="inline-delimiter">?&gt;</span><span class="string"><span class="content">&amp;</span><span class="content">histo=</span></span><span class="inline-delimiter">&lt;?php</span> <span class="predefined">echo</span> <span class="local-variable">$histo</span> <span class="inline-delimiter">?&gt;</span><span class="string"><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="inline-delimiter">&lt;?php</span> <span class="predefined">echo</span> <span class="local-variable">$i</span>; <span class="inline-delimiter">?&gt;</span>
              <span class="tag">&lt;/a&gt;</span>
            <span class="tag">&lt;/td&gt;</span>
          <span class="inline-delimiter">&lt;?php</span> <span class="keyword">endfor</span>; <span class="inline-delimiter">?&gt;</span>
        <span class="tag">&lt;/tr&gt;</span>
      <span class="tag">&lt;/tbody&gt;</span>
    <span class="tag">&lt;/table&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
  <span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2018-02-18 15:28:35 CET
</div>
</div>
</body>
</html>